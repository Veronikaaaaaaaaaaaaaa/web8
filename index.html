<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Салон красоты "У Веронички"</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body class = "sm-4">
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="#">Салон красоты "У Веронички"</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="#">Главная</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Услуги</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">О нас</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Контакты</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="container text-center">
                <h1>Добро пожаловать к нам!</h1>
                <p>Ваш идеальный салон красоты</p>
            </div>
        </section>
        <section class="services p-5 p-0">
            <div class="container">
                <h2 class="text-center mb-5">Наши услуги</h2>
                <div class="row">
                    <div class="col-md-4 service-item">
                        <i class="fas fa-cut"></i>
                        <h3>Стрижки</h3>
                        <p>Профессиональные стрижки для любого типа волос</p>
                    </div>
                    <div class="col-md-4 service-item">
                        <i class="fas fa-palette"></i>
                        <h3>Окрашивание</h3>
                        <p>Качественное окрашивание с использованием безопасных красителей</p>
                    </div>
                    <div class="col-md-4 service-item">
                        <i class="fas fa-spa"></i>
                        <h3>SPA-процедуры</h3>
                        <p>Расслабляющие и оздоравливающие SPA-процедуры</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="content m-4 m-0 p-4 p-0"> 
            <button class="m-auto p-2"class="content m-auto p-4" id ="toggleButton">More information</button>
            <ul id="hiddenBlock"> 
                <li>
                    <a href="http://kubsu.ru">Абсолютная на КубГУ</a>
                </li>
                <li>
                    <a href="https://kubsu.ru">Абсолютная на КубГУ https</a>
                </li>
                <li>
                    <a
                        href="https://kartinkof.club/uploads/posts/2022-03/1648227845_5-kartinkof-club-p-mem-kotik-milii-5.jpg"><img
                            src="cat1.jpg" width="300" alt="Ссылка изображение"></a>
                </li>
                <li>
                    <a href="tesk1.html">Сокращенная на внутреннюю страницу</a>
                </li>
                <li>
                    <a href="#woman">Ссылка на фрагмент текущей страницы</a>
                </li>
                <li>
                    <a href="https://www.kubsu.ru/ru/search?q=университет&page=3&sort=desc">Ссылка с тремя
                        параметрами</a>
                </li>
                <li>
                    <a href="https://www.kubsu.ru/ru/news/123">Ссылка с параметром id</a>
                </li>
                <li>
                    <a href=./tesk1.html>Относительная на страницу в каталоге</a>
                </li>
                <li>
                    <a href=./about/task1-2.html>Относительную на страницу в каталог about</a>
                </li>
                <li>
                    <a href="./about/task1-2.html">задание 11 можно проверить тут</a>
                </li>
                <li>
                    <a href="./about/about2/task1-3.html">задание 12 можно проверить тут</a>
                </li>
                <li>
                    <p> задание 13 <a href="https://kubsu.ru/">проверить</a> </p>
                </li>
                <li>
                    <a href="https://example.com/#example"> задание 14 </a>
                </li>

                <li>
                    <img src="cat.jpg" usemap="#cat" width=300 height=300 alt="cat">

                    <map name="cat">
                        <area shape="rect" coords="20,20,270,270" href="https://murkote.com/ru/porodi-koshek/"
                            alt="this cat">
                    </map>
                </li>

                <li>
                    <img src="cat2.jpg" width=300 height=300 usemap="#cats" alt="cats">

                    <map name="cats">
                        <area shape="circle" coords="150,150,100"
                            href="https://morestihov.ru/zivoy-ugolok/korotkie-stikhi-pro-kota.html#:~:text=%D0%9A%D0%BE%D1%80%D0%BE%D1%82%D0%BA%D0%B8%D0%B5%20%D1%81%D1%82%D0%B8%D1%85%D0%B8%20%D0%BF%D1%80%D0%BE%20%D0%BA%D0%BE%D1%82%D0%BE%D0%B2%201%20%D0%9A%D0%BE%D1%82%D0%BE%D1%84%D0%B5%D0%B9%20%D0%92%20%D0%B3%D0%BE%D1%81%D1%82%D0%B8,%D0%A0%D1%8B%D0%B6%D0%B8%D0%B9%20%D0%BA%D0%BE%D1%82%20%D0%A3%20%D0%BD%D0%B0%D1%81%20%D0%B6%D0%B8%D0%B2%D1%91%D1%82.%20%D0%A1%D0%BF%D0%B8%D0%BD%D0%BA%D0%B0%20%D1%80%D1%8B%D0%B6%D0%B0%D1%8F%2C%20"
                            alt="my cats">
                    </map>
                </li>

                <li>
                    <a href="">Задание 16</a>
                </li>
                <li>
                    <a>Задание 17</a>
                </li>
                <li>
                    <a href="https://www.meme-arsenal.com/memes/06903332b703225332a4a617e81df42d.jpg"
                        rel="nofollow">Запрещенный переход - задание 18</a>
                </li>
                <li>
                    <a href="https://kartinkof.club/uploads/posts/2022-03/1648329591_1-kartinkof-club-p-kot-s-ulibkoi-mem-1.jpg"
                        rel="noindex">Запрещенная индексация - задание 19</a>
                </li>
                <li>
                    <ol>
                        <li>
                            <a href="#" title="title 1">Один</a>
                        </li>
                        <li>
                            <a href="#" title="title 2">Два</a>
                        </li>
                        <li>
                            <a href="#" title="title 3">Три</a>
                        </li>
                    </ol>
                </li>
                <li>
                    <a href="ftp://username:password@ftp.example.com/path/to/file.zip">задание 21</a>
                </li>
            </ul> <br>
            <table class="data-table">
                <thead>
                    <tr>
                        <th id="1" colspan = "2" class = "p-3 p-2">Услуга</th>
                        <th class = "p-3 p-2">Время</th>
                        <th class = "p-3 p-2">Цена</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class = "p-3 p-2">Классическая стрижка</td>
                        <td class = "p-3 p-2">Стрижка любой длины с учетом анатомических особенностей и стиля клиента. Включает мытье
                            головы, стрижку и укладку.</td>
                        <td class = "p-3 p-2">30-45 минут</td>
                        <td class = "p-3 p-2">800-1500 руб.</td>
                    </tr>
                    <tr>
                        <td>Укладка волос</td>
                        <td>Стильная укладка для любого случая: свадьба, вечернее мероприятие или повседневный стиль.
                            Используем профессиональные средства для укладки.</td>
                        <td>40-60 минут</td>
                        <td>1200 руб.</td>
                    </tr>
                    <tr>
                        <td>Маникюр</td>
                        <td>Комплексный уход за руками, включает обрезку и форму ногтей, кутикулу, а также нанесение
                            лака. Возможен вариант с покрытием гель-лаком.</td>
                        <td>60 минут</td>
                        <td>800 рублей (гель-лак - 1500 руб.)</td>
                    </tr>
                    <tr>
                        <td>Педикюр</td>
                        <td>Полный уход за ногами, включая обработку кожи, обрезку и форму ногтей, массаж. Доступен
                            классический и Spa-педикюр.</td>
                        <td>90 минут</td>
                        <td>1200 рублей (Spa-педикюр - 2000 руб.)</td>
                    </tr>
                    <tr>
                        <td>Косметический уход за лицом</td>
                        <td>Процедура включает очищение, тонизирование, питание и увлажнение кожи, а также массаж лица.
                            Индивидуально подбираем средства исходя из типа кожи.</td>
                        <td>60 минут</td>
                        <td>2500 рублей</td>
                    </tr>
                    <tr>
                        <td>Массаж тела</td>
                        <td>Расслабляющий или антицеллюлитный массаж, который помогает снять напряжение и улучшить
                            кровообращение.</td>
                        <td>1 час</td>
                        <td>от 800 руб.</td>
                    </tr>
                </tbody>
            </table> <br>    
            <div class="calc p-3">
                <h1>Калькулятор стоимости заказа</h1>
                <label for="quantity">Количество:</label>
                <input type="number" class="p-1 mb-3" id="quantity" min="1" value="1">
                <label>Услуги:</label>
                <div style="display: flex;">
                    <input type="radio" id="service1" name="service" value="800" checked>
                    <label for="service1">Классическая стрижка</label>
                </div>
                <div style="display: flex;">
                    <input type="radio" id="service2" name="service" value="2500">
                    <label for="service2">Косметический уход за лицом</label>
                </div>
                <div style="display: flex;">
                    <input type="radio" id="service3" name="service" value="1200">
                    <label for="service3">Укладка волос</label>
                </div>
                <div style="display: flex;">
                    <input type="radio" id="service4" name="service" value="800">
                    <label for="service4">Маникюр</label>
                </div>
                <div style="display: flex;">
                    <input type="radio" id="service5" name="service" value="1200">
                    <label for="service5">Педикюр</label>
                </div>
                <div style="display: flex;">
                    <input type="radio" id="service6" name="service" value="800">
                    <label for="service6">Массаж тела</label>
                </div><br>
                <label for="option">Доп.услуги:</label>
                <select id="option" class="p-1 mb-3">
                    <option value="0">Без доп.услуг</option>
                    <option value="100">Чай (+100 рублей)</option>
                    <option value="200">Кофе (+200 рублей)</option>
                    <option value="500">Шампанское (+500 рублей)</option>
                </select><br>
                <div style="display: flex;">
                    <input type="checkbox" id="property" value="1000">
                    <label for="property">Фотосессия (+1000 рублей)</label>
                </div><br>
                <button id="calculate">Рассчитать стоимость</button><br>
                <div id="result" class="mt-1"></div>
            </div><br>
            </div>
        </div>
        <div class="gallery-container">
            <button class="arrow left" onclick="moveSlide(-1)">&#10094;</button>
            <div class="gallery">
                <div class="slides">
                    <div class="slide">
                        <img src="photo_2024-12-08_15-28-54.jpg" alt="Image 1">
                    </div>
                    <div class="slide">
                        <img src="photo_2024-12-08_15-28-56.jpg" alt="Image 2">
                    </div>
                    <div class="slide">
                        <img src="photo_2024-12-08_15-28-58.jpg" alt="Image 3">
                    </div>
                    <div class="slide">
                        <img src="photo_2024-12-08_15-29-00.jpg" alt="Image 4">
                    </div>
                    <div class="slide">
                        <img src="photo_2024-12-08_15-29-05.jpg" alt="Image 5">
                    </div>
                    <div class="slide">
                        <img src="photo_2024-12-08_15-29-03.jpg" alt="Image 6">
                    </div>
                    <div class="slide">
                        <img src="photo_2024-12-08_15-29-07.jpg" alt="Image 7">
                    </div>
                    <div class="slide">
                        <img src="photo_2024-12-08_15-29-09.jpg" alt="Image 8">
                    </div>
                </div>
            </div>
            <button class="arrow right" onclick="moveSlide(1)">&#10095;</button>
        </div>
        
        <div class="pager">
            <span id="current-page">1</span> / <span id="total-pages">5</span>
        </div><br>

        <button class="openPopup container">Открыть форму</button>
        <div class="popup" id="popup">
            <div class="popup-content">
            <button id="closePopup" class="close-button">&times;</button>
            <h3>Форма обратной связи</h3>
            <form id="contactForm">
                <label for="name">ФИО:</label>
                <input type="text" id="name" name="name" placeholder="Ваше имя" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" placeholder="Ваш email" required>

                <label for="phone">Телефон:</label>
                <input type="tel" id="phone" name="phone" placeholder="Ваш телефон" required>

                <label for="organization">Организация:</label>
                <input type="text" id="organization" name="organization" placeholder="Ваша организация">

                <label for="message">Сообщение:</label>
                <textarea id="message" name="message" placeholder="Ваше сообщение" required></textarea>

                <div style="display: flex;">
                    <input type="checkbox" id="agreement" name="agreement" required> 
                    <label for="agreement">Я согласен с <a href="#">политикой обработки персональных данных</a></label>
                </div>

                <button type="submit" id="submitBtn">Отправить</button>
                <div class="message" id="messageArea"></div>
            </form>
            </div>
        </div> 

        <section class="contact p-5 p-1">
            <div class="container text-center">
                <h2 class = "mb-4">Свяжитесь с нами</h2>
                <p class = "mb-4">Мы будем рады ответить на все ваши вопросы</p>
                <a href="#" class="btn btn-light">Записаться на прием</a>
            </div>
        </section>
    </main>

    <footer class="footer p-4 p-0">
        <div class="footer-content m-0 m-auto">
            <p>&copy; Нечаева Вероника</p>
        </div>
    </footer>

    <script>
        const toggleButton = document.getElementById("toggleButton");
        const hiddenBlock = document.getElementById("hiddenBlock");

        toggleButton.addEventListener("click", () => {
        if (hiddenBlock.style.display === "block") {
            hiddenBlock.style.display = "none";
        } else {
            hiddenBlock.style.display = "block";
        }
        });

        const quantityInput = document.getElementById('quantity');
        const serviceRadios = document.querySelectorAll('input[name="service"]');
        const optionSelect = document.getElementById('option');
        const propertyCheckbox = document.getElementById('property');
        const calculateButton = document.getElementById('calculate');
        const resultDiv = document.getElementById('result');
        function calculateCost() {
          const quantity = parseInt(quantityInput.value);
          let price = 0;
          let selectedService = null;
    
          for (const radio of serviceRadios) {
            if (radio.checked) {
              selectedService = radio;
              price = parseInt(radio.value);
              break;
            }
          }
    
        if (selectedService) {
            if (selectedService.id === 'service4' || selectedService.id === 'service5' || selectedService.id === 'service6') {
              optionSelect.style.display = 'block';
              propertyCheckbox.style.display = 'none';
              if(selectedService.id === 'service4' || selectedService.id === 'service5'){
                propertyCheckbox.style.display = 'block';
                if (propertyCheckbox.checked ) {
                    price += parseInt(propertyCheckbox.value);
                }   
                }
              price += parseInt(optionSelect.value);
            }
            else if (selectedService.id === 'service3' || selectedService.id === 'service1' || selectedService.id === 'service2') {
              propertyCheckbox.style.display = 'none';
              optionSelect.style.display = 'none';
              if(selectedService.id === 'service3' || selectedService.id === 'service1'){
                propertyCheckbox.style.display = 'block';
                if (propertyCheckbox.checked ) {
                    price += parseInt(propertyCheckbox.value);
                }
              } 
            }
            else {
              optionSelect.style.display = 'none';
              propertyCheckbox.style.display = 'none';
            }
          }
          if (quantity <= 0 || isNaN(quantity)) {
              resultDiv.textContent = 'Некорректное количество товара!';
              return;
          }
          const totalCost = quantity * price;
          resultDiv.textContent = `Стоимость заказа: ${totalCost} руб.`;
        }
        serviceRadios.forEach(radio => {
          radio.addEventListener('change', calculateCost);
        });
        calculateButton.addEventListener('click', calculateCost);

        let currentSlide = 0; // Индекс текущей страницы
        const totalSlides = 8; // Общее количество слайдов
        const slidesToShow = window.innerWidth <= 768 ? 1 : 3; // Установка количества слайдов для показа
        const totalPages = window.innerWidth <= 768 ? 8 : 6; // Общее количество страниц

        document.getElementById('total-pages').textContent = totalPages;

        function updatePager() {
            document.getElementById('current-page').textContent = currentSlide + 1;
        }

        function moveSlide(direction) {
            currentSlide += direction;

            // Проверка границ текущего индекса страницы
            if (currentSlide < 0) {
                currentSlide = 0;
            } else if (currentSlide >= totalPages) {
                currentSlide = totalPages - 1;
            }

            // Вычисляем смещение для слайдов
            const gallery = document.querySelector('.slides');
            const offset = window.innerWidth <= 768 ? -currentSlide * (100 / 1) : -currentSlide * (100 / 3);
            gallery.style.transform = `translateX(${offset}%)`;
            updatePager();
        }

        const openPopupBtn = document.getElementById('openPopup');
    const popup = document.getElementById('popup');
    const contactForm = document.getElementById('contactForm');
    const submitBtn = document.getElementById('submitBtn');
    const messageArea = document.getElementById('messageArea');
    const closePopupBtn = document.getElementById('closePopup');

    // Загружаем данные из LocalStorage
    const storedData = localStorage.getItem('formData');
    if (storedData) {
      const data = JSON.parse(storedData);
      document.getElementById('name').value = data.name || '';
      document.getElementById('email').value = data.email || '';
      document.getElementById('phone').value = data.phone || '';
      document.getElementById('organization').value = data.organization || '';
      document.getElementById('message').value = data.message || '';
    }

    // Открыть попап
    openPopupBtn.addEventListener('click', () => {
      popup.style.display = 'flex';
      history.pushState({}, '', '#contact'); // Изменить URL
    });

    // Закрыть попап
    closePopupBtn.addEventListener('click', () => {
      popup.style.display = 'none';
      history.pushState({}, '', '#'); // Вернуть URL
    });

    // Закрыть попап при нажатии "Назад"
    window.addEventListener('popstate', () => {
      popup.style.display = 'none';
    });

    // Отправка формы
    contactForm.addEventListener('submit', (event) => {
      event.preventDefault();

      // Проверка согласия с политикой
      const agreementCheckbox = document.getElementById('agreement');
      if (!agreementCheckbox.checked) {
        messageArea.textContent = 'Пожалуйста, согласитесь с политикой обработки персональных данных.';
        return;
      }

      // Отключение кнопки отправки
      submitBtn.disabled = true;
      messageArea.textContent = 'Отправка...';

      // Создание объекта с данными формы
      const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        organization: document.getElementById('organization').value,
        message: document.getElementById('message').value,
      };

      // Метод XHR
      const xhr = new XMLHttpRequest();
      xhr.open('POST', 'https://formcarry.com/s/t5C3Z9nIbL-', true); 
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.onload = function() {
        if (xhr.status >= 200 && xhr.status < 300) {
          messageArea.textContent = 'Ошибка при отправке формы. Пожалуйста, попробуйте ещё раз.';
          contactForm.reset(); 
          localStorage.setItem('formData', JSON.stringify(formData)); 
        } else {
          messageArea.textContent = 'Форма успешно отправлена!';
        }
        submitBtn.disabled = false;
      };
      xhr.onerror = function() {
        messageArea.textContent = 'Форма успешно отправлена!';
        submitBtn.disabled = false;
      };
      xhr.send(JSON.stringify(formData));
    });
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/your-font-awesome-kit.js" crossorigin="anonymous"></script>
</body>

</html>